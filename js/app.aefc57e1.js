(function(){"use strict";var e={1539:function(e,t,n){var o=n(5130),i=n(6768);const l={id:"app"};function d(e,t,n,o,d,s){const r=(0,i.g2)("FormBuilder");return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.bF)(r)])}var s=n(4232);const r={class:"form-builder"},a=(0,i.Fv)('<div class="header" style="height:50px;"><svg class="logo" viewBox="0 0 128 128" width="24" height="24"><path fill="#42b883" d="M78.8,10L64,35.4L49.2,10H0l64,110l64-110C128,10,78.8,10,78.8,10z"></path><path fill="#35495e" d="M78.8,10L64,35.4L49.2,10H25.6L64,76l38.4-66H78.8z"></path></svg><h2 class="tagline">make-form-tool</h2></div>',1),p={class:"container"},u={class:"left"},g=["onContextmenu"],m={class:"right"},c=["onMousedown","onContextmenu"],h=["onUpdate:modelValue"],v=["onUpdate:modelValue"],f=["value"],E={key:2},k={class:"radio-options"},b=["id","value","onUpdate:modelValue"],C=["for"],y={key:3},O={class:"checkbox-options"},L=["id","value","onUpdate:modelValue"],x=["for"],w={key:4},D=(0,i.Lk)("h1",{class:"tagline",style:{"padding-top":"10px"}},[(0,i.eW)(" Drag and drop, and "),(0,i.Lk)("span",{class:"accent"},"edit"),(0,i.eW)(" by right-click.")],-1),I={key:1,class:"edit-dialog"},X={key:0},M=["onUpdate:modelValue"],V=["onClick","disabled"],_=["disabled"],T={key:1},F=["onUpdate:modelValue"],R=["onClick","disabled"],S=["disabled"],U={key:2},K={key:3},P=["onUpdate:modelValue"],$=["onClick","disabled"],j=["disabled"];function A(e,t,n,l,d,A){const B=(0,i.g2)("draggable");return(0,i.uX)(),(0,i.CE)("div",r,[a,(0,i.Lk)("div",p,[(0,i.Lk)("div",u,[(0,i.bF)(B,{modelValue:d.sidebarItems,"onUpdate:modelValue":t[0]||(t[0]=e=>d.sidebarItems=e),group:{name:"formElements",pull:"clone",put:!1},clone:A.cloneElement,itemKey:"id",onStart:A.onDragStart,onEnd:A.onDragEnd},{item:(0,i.k6)((({element:e})=>[(0,i.Lk)("div",{class:"draggable-item",onContextmenu:(0,o.D$)((t=>A.showContextMenu(t,e)),["prevent"])},(0,s.v_)(e.content),41,g)])),_:1},8,["modelValue","clone","onStart","onEnd"])]),(0,i.Lk)("div",m,[(0,i.Lk)("div",{class:"grid",onDrop:t[2]||(t[2]=(0,o.D$)(((...e)=>A.onDrop&&A.onDrop(...e)),["prevent"])),onDragover:t[3]||(t[3]=(0,o.D$)(((...e)=>A.onDragOver&&A.onDragOver(...e)),["prevent"])),onDragleave:t[4]||(t[4]=(...e)=>A.onDragLeave&&A.onDragLeave(...e)),ref:"gridContainer"},[d.isDragging?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"drop-preview",style:(0,s.Tr)({top:d.dropPreviewTop+"%",left:d.dropPreviewLeft+"%"})},null,4)):(0,i.Q3)("",!0),(0,i.bF)(B,{modelValue:d.formItems,"onUpdate:modelValue":t[1]||(t[1]=e=>d.formItems=e),group:{name:"formElements"},itemKey:"id"},{item:(0,i.k6)((({element:e})=>[(0,i.Lk)("div",{class:"draggable-item",style:(0,s.Tr)(A.getStyle(e)),onMousedown:t=>A.onMouseDown(t,e),onContextmenu:(0,o.D$)((t=>A.showContextMenu(t,e)),["prevent"])},["input"===e.type?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:0,"onUpdate:modelValue":t=>e.content=t,disabled:""},null,8,h)),[[o.Jo,e.content]]):"dropdown"===e.type?(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:1,"onUpdate:modelValue":t=>e.selectedOption=t,style:{width:"calc(100% - 22px)"}},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.options,((e,t)=>((0,i.uX)(),(0,i.CE)("option",{key:t,value:e},(0,s.v_)(e),9,f)))),128))],8,v)),[[o.u1,e.selectedOption]]):"radio"===e.type?((0,i.uX)(),(0,i.CE)("div",E,[(0,i.Lk)("div",k,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.options,((t,n)=>((0,i.uX)(),(0,i.CE)("div",{key:n},[(0,i.bo)((0,i.Lk)("input",{type:"radio",id:A.getRadioId(e.id,n),value:t,"onUpdate:modelValue":t=>e.selectedOption=t},null,8,b),[[o.XL,e.selectedOption]]),(0,i.Lk)("label",{for:A.getRadioId(e.id,n)},(0,s.v_)(t),9,C)])))),128))])])):"checkbox"===e.type?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("div",O,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.options,((t,n)=>((0,i.uX)(),(0,i.CE)("div",{key:n},[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:A.getCheckboxId(e.id,n),value:t,"onUpdate:modelValue":t=>e.selectedOptions=t},null,8,L),[[o.lH,e.selectedOptions]]),(0,i.Lk)("label",{for:A.getCheckboxId(e.id,n)},(0,s.v_)(t),9,x)])))),128))])])):((0,i.uX)(),(0,i.CE)("div",w,(0,s.v_)(e.content),1))],44,c)])),_:1},8,["modelValue"]),((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(11,(e=>(0,i.Lk)("div",{class:(0,s.C4)(["grid-line horizontal",{"solid-line":1===e||11===e}]),key:"v-"+e,style:(0,s.Tr)({top:10*(e-1)+"%"})},null,6))),64)),((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(11,(e=>(0,i.Lk)("div",{class:(0,s.C4)(["grid-line vertical",{"solid-line":1===e||11===e}]),key:"h-"+e,style:(0,s.Tr)({left:10*(e-1)+"%"})},null,6))),64))],544)])]),D,d.showMenu?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"context-menu",style:(0,s.Tr)({top:d.menuTop+"px",left:d.menuLeft+"px"})},[(0,i.Lk)("ul",null,[(0,i.Lk)("li",{onClick:t[5]||(t[5]=(...e)=>A.editElement&&A.editElement(...e))},"Edit"),(0,i.Lk)("li",{onClick:t[6]||(t[6]=(...e)=>A.removeElement&&A.removeElement(...e))},"Remove")])],4)):(0,i.Q3)("",!0),d.editingElement?((0,i.uX)(),(0,i.CE)("div",I,["dropdown"===d.editingElement.type?((0,i.uX)(),(0,i.CE)("div",X,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(d.editingElement.options,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t},[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":e=>d.editingElement.options[t]=e},null,8,M),[[o.Jo,d.editingElement.options[t]]]),(0,i.Lk)("button",{onClick:e=>A.removeOption(t),disabled:1===d.editingElement.options.length},"Remove",8,V)])))),128)),(0,i.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>A.addOption&&A.addOption(...e)),disabled:d.editingElement.options.length>=5},"Add Option",8,_),(0,i.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>A.saveOptions&&A.saveOptions(...e))},"Save")])):"radio"===d.editingElement.type?((0,i.uX)(),(0,i.CE)("div",T,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(d.editingElement.options,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t},[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":e=>d.editingElement.options[t]=e},null,8,F),[[o.Jo,d.editingElement.options[t]]]),(0,i.Lk)("button",{onClick:e=>A.removeRadioOption(t),disabled:1===d.editingElement.options.length},"Remove",8,R)])))),128)),(0,i.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>A.addRadioOption&&A.addRadioOption(...e)),disabled:d.editingElement.options.length>=2},"Add Option",8,S),(0,i.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>A.saveRadioOptions&&A.saveRadioOptions(...e))},"Save")])):"input"===d.editingElement.type?((0,i.uX)(),(0,i.CE)("div",U,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>d.editingElement.content=e)},null,512),[[o.Jo,d.editingElement.content]]),(0,i.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>A.saveText&&A.saveText(...e))},"Save")])):"checkbox"===d.editingElement.type?((0,i.uX)(),(0,i.CE)("div",K,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(d.editingElement.options,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t},[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":e=>d.editingElement.options[t]=e},null,8,P),[[o.Jo,d.editingElement.options[t]]]),(0,i.Lk)("button",{onClick:e=>A.removeCheckboxOption(t),disabled:1===d.editingElement.options.length},"Remove",8,$)])))),128)),(0,i.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>A.addCheckboxOption&&A.addCheckboxOption(...e)),disabled:d.editingElement.options.length>=2},"Add Option",8,j),(0,i.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>A.saveCheckboxOptions&&A.saveCheckboxOptions(...e))},"Save")])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)])}n(4114);var B=n(1527),J=n.n(B),H={name:"FormBuilder",components:{draggable:J()},data(){return{sidebarItems:[{id:"1",content:"テキスト欄",type:"input"},{id:"2",content:"ドロップダウン",type:"dropdown",options:["Option 1","Option 2","Option 3"],selectedOption:""},{id:"3",content:"ラジオボタン",type:"radio",options:["項目1","項目2"],selectedOption:"項目1"},{id:"4",content:"チェックボックス",type:"checkbox",options:["Option 1","Option 2"],selectedOptions:[]}],formItems:[],draggingElement:null,isDragging:!1,dropPreviewTop:0,dropPreviewLeft:0,showMenu:!1,menuTop:0,menuLeft:0,selectedElement:null,editingElement:null}},methods:{onDragStart(e){this.draggingElement=e.item.__draggable_context.element,console.log("********:: onDragStart",this.draggingElement),console.log("********:: onDragStart",this.draggingElement.options),"checkbox"==this.draggingElement.type?this.draggingElement.options=["Option 1","Option 2"]:"dropdown"==this.draggingElement.type?this.draggingElement.options=["Option 1","Option 2","Option 3"]:"radio"==this.draggingElement.type&&(this.draggingElement.options=["項目1","項目2"])},onDragEnd(){this.draggingElement=null,this.isDragging=!1,console.log("onDragEnd")},onDragLeave(){this.isDragging=!1,console.log("onDragLeave: Dragging left")},onDragOver(e){if(console.log("call onDragOver"),e.preventDefault(),console.log("this.draggingElement:"+this.draggingElement),this.draggingElement){const t=this.$refs.gridContainer.getBoundingClientRect(),n=e.clientX-t.left,o=e.clientY-t.top,i=t.width,l=t.height;this.dropPreviewTop=10*Math.floor(o/(l/10)),this.dropPreviewLeft=10*Math.floor(n/(i/10)),this.isDragging=!0}},createForm(){console.log("Createボタンがクリックされました")},cloneElement(e){return console.log("********** cloneElement"),{...e,id:Date.now(),top:0,left:0,width:20,height:10}},getStyle(e){return{position:"absolute",top:e.top+"%",left:e.left+"%",width:"20%",height:"10%"}},onMouseDown(e,t){this.draggingElement=t},onDrop(e){if(e.preventDefault(),this.draggingElement){const t=this.$refs.gridContainer.getBoundingClientRect(),n=t.width,o=t.height;console.log(n,o);const i=e.clientX-t.left,l=e.clientY-t.top,d=10*Math.floor(l/(o/10)),s=10*Math.floor(i/(n/10));console.log(d,s);const r=this.formItems.some((e=>e.top===d&&e.left===s));if(r)return void alert("この位置には既にアイテムがあります。");console.log("this.formItems"+this.formItems),console.log("top"+d),console.log("left"+s);const a=this.formItems.some((e=>e.top===d&&e.left+10===s||e.top===d&&e.left-10===s));if(a)return void alert("この位置には部分的に重なるアイテムがあります。");const p=this.formItems.findIndex((e=>e.id===this.draggingElement.id));if(-1===p){const e={...this.draggingElement,id:Date.now(),top:d,left:s,width:20,height:10};this.formItems.push(e)}else this.formItems[p].top=d,this.formItems[p].left=s,this.formItems[p].width=20,this.formItems[p].height=10;this.draggingElement=null,this.isDragging=!1}},showContextMenu(e,t){e.preventDefault(),this.menuTop=e.clientY,this.menuLeft=e.clientX,this.selectedElement=t,this.showMenu=!0},editElement(){this.editingElement=this.selectedElement,this.showMenu=!1},removeElement(){const e=this.formItems.findIndex((e=>e.id===this.selectedElement.id));-1!==e&&this.formItems.splice(e,1),this.showMenu=!1},removeOption(e){this.editingElement.options.splice(e,1)},addOption(){this.editingElement.options.push("")},saveOptions(){this.editingElement=null},removeRadioOption(e){this.editingElement.options.splice(e,1)},addRadioOption(){this.editingElement.options.push("")},saveRadioOptions(){this.editingElement=null},getRadioId(e,t){return`radio_${e}_${t}`},getCheckboxId(e,t){return`checkbox-${e}-${t}`},addCheckboxOption(){this.editingElement.options.push("")},removeCheckboxOption(e){this.editingElement.options.splice(e,1)},saveCheckboxOptions(){const e=this.formItems.findIndex((e=>e.id===this.editingElement.id));-1!==e&&(this.formItems[e].options=[...this.editingElement.options]),this.editingElement=null},saveText(){this.editingElement=null}}},Q=n(1241);const z=(0,Q.A)(H,[["render",A]]);var Y=z,W={name:"App",components:{FormBuilder:Y},created(){document.title="make form tool"}};const q=(0,Q.A)(W,[["render",d]]);var G=q;(0,o.Ef)(G).mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,l){if(!o){var d=1/0;for(p=0;p<e.length;p++){o=e[p][0],i=e[p][1],l=e[p][2];for(var s=!0,r=0;r<o.length;r++)(!1&l||d>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[r])}))?o.splice(r--,1):(s=!1,l<d&&(d=l));if(s){e.splice(p--,1);var a=i();void 0!==a&&(t=a)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[o,i,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,l,d=o[0],s=o[1],r=o[2],a=0;if(d.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(r)var p=r(n)}for(t&&t(o);a<d.length;a++)l=d[a],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(p)},o=self["webpackChunkmake_app_tool"]=self["webpackChunkmake_app_tool"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(1539)}));o=n.O(o)})();
//# sourceMappingURL=app.aefc57e1.js.map